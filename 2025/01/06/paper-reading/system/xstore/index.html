<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="ä¿®å¹´">





<title>XStore: Fast RDMA-based Ordered Key-Value Store using Remote Learned Cache | ä¿®å¹´</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


      <meta charset="UTF-8">
    <title>live2d-demo</title>
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- Live2DCubismCore -->
    <script src="https://cdn.jsdelivr.net/gh/litstronger/live2d-moc3@master/js/frame/live2dcubismcore.min.js"></script>
    <!-- Include Pixi. -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.6.1/pixi.min.js"></script>
    <!-- Include Cubism Components. -->
    <script src="https://cdn.jsdelivr.net/gh/litstronger/live2d-moc3@master/js/live2dcubismframework.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/litstronger/live2d-moc3@master/js/live2dcubismpixi.js"></script>
    <!-- User's Script -->
    <script src="https://cdn.jsdelivr.net/gh/litstronger/live2d-moc3@master/js/l2d.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/litstronger/live2d-moc3@master/js/main.js"></script>
    <style>
    </style>
<meta name="generator" content="Hexo 5.4.2"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "Â· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "Â· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Xiunian&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/about">About</a>
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Xiunian&#39;s Blog</a><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/about">About</a>
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc" style="right: -4em;">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // ä¸º 6 æ—¶å±•å¼€æ‰€æœ‰
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // è¿™ä¸ªå€¼æ˜¯ç”± tocbot æºç é‡Œå®šä¹‰çš„ scrollSmoothDuration å¾—æ¥çš„
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">XStore: Fast RDMA-based Ordered Key-Value Store using Remote Learned Cache</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">ä¿®å¹´</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">ä¸€æœˆ 6, 2025&nbsp;&nbsp;20:25:29</a>
                        </span>
                    
                    
                </div>
            
        </header>

        <div class="post-content">
            <p>ã€2025.1.6 reportã€‘</p>
<p><strong>OSDIâ€™20</strong>: <a target="_blank" rel="noopener" href="https://www.usenix.org/conference/osdi20/presentation/wei">Fast RDMA-based Ordered Key-Value Store using Remote Learned Cache</a></p>
<p>Xingda Wei, Rong Chen, Haibo Chen</p>
<p>æ¦‚è¿°ï¼šæå‡ºäº†ä¸€ç§æ··åˆ learned index å’Œ B+ tree ç´¢å¼•æ¶æ„çš„ RDMA-based ordered kvstore</p>
<h1 id="1-èƒŒæ™¯ï¼šLearned-Index"><a href="#1-èƒŒæ™¯ï¼šLearned-Index" class="headerlink" title="1. èƒŒæ™¯ï¼šLearned Index"></a>1. èƒŒæ™¯ï¼šLearned Index</h1><p>SIGMODâ€™18: <a target="_blank" rel="noopener" href="https://dl.acm.org/doi/abs/10.1145/3183713.3196909">The Case for Learned Index Structures</a>  å¼€å±±ä¹‹ä½œ</p>
<p>æå‡ºï¼šå¯ä»¥é€šè¿‡æœºå™¨å­¦ä¹ æ¨¡å‹æ›¿ä»£èŒƒå›´ç´¢å¼•ï¼ˆå¦‚B+æ ‘ï¼‰ã€‚</p>
<h3 id="ä¸ºä»€ä¹ˆå¯ä»¥æ›¿ä»£ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå¯ä»¥æ›¿ä»£ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå¯ä»¥æ›¿ä»£ï¼Ÿ"></a><strong>ä¸ºä»€ä¹ˆå¯ä»¥æ›¿ä»£ï¼Ÿ</strong></h3><ol>
<li><p><strong>ç´¢å¼•æœ¬èº«å³å¯è§†ä¸ºé¢„æµ‹æ¨¡å‹ã€‚</strong>é€šè¿‡ç´¢å¼•ç¡®å®šæ•°æ®ä½ç½®ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªé¢„æµ‹è¿‡ç¨‹ï¼škeyå€¼ â†’ ä½ç½®pos</p>
</li>
<li><p>Bæ ‘ï¼š</p>
<p>keyğŸ‘‰Bæ ‘ğŸ‘‰å¶èŠ‚ç‚¹ï¼ˆè¯¯å·®èŒƒå›´ï¼‰ï¼Œç„¶åå†åœ¨å¶èŠ‚ç‚¹ä¸­è¿›è¡Œç²¾ç¡®æŸ¥æ‰¾è·å–ä½ç½®ã€‚</p>
</li>
</ol>
<p><img src="/2025/01/06/paper-reading/system/xstore/1736224874684-18.png" alt="img"></p>
<h3 id="å¦‚ä½•æ›¿ä»£ï¼Ÿ"><a href="#å¦‚ä½•æ›¿ä»£ï¼Ÿ" class="headerlink" title="å¦‚ä½•æ›¿ä»£ï¼Ÿ"></a>å¦‚ä½•æ›¿ä»£ï¼Ÿ</h3><ol>
<li>è®­ç»ƒæ¨¡å‹ï¼šâ‘  datasetï¼škey arrayï¼Œâ‘¡ è·å–è®­ç»ƒè¿‡ç¨‹ä¸­çš„æœ€å¤§æœ€å°è¯¯å·®ï¼šmax_errï¼Œmin_err</li>
<li>Workflow: keyğŸ‘‰ML ModelğŸ‘‰posğŸ‘‰[pos - <strong>min_err,</strong> pos + <strong>max_err</strong>]ï¼Œè¯»å–è¯¥èŒƒå›´å†…æ‰€æœ‰æ•°æ®ç²¾ç¡®æŸ¥æ‰¾</li>
</ol>
<p>range indexï¼Œæ•°æ®æœ‰åº</p>
<p><strong>æ¨¡å‹</strong>ï¼šæ•°æ®å­˜å‚¨åœ¨æœ‰åºæ•°ç»„ï¼Œç›´æ¥é€šè¿‡ç®€å•æ¨¡å‹æ‹Ÿåˆ<strong>CDF</strong>ï¼ˆç´¯ç§¯åˆ†å¸ƒå‡½æ•°ï¼‰æ¥å®ç°ä½ç½®é¢„æµ‹</p>
<p><strong>è§£é‡Š</strong>ï¼šå‡è®¾F(x)ä¸ºé¢„æµ‹çš„ç´¯ç§¯åˆ†å¸ƒå‡½æ•°ï¼ˆCDFï¼‰ï¼Œè¡¨ç¤ºkeyå€¼å°äºxçš„æ¦‚ç‡ï¼›Nä¸ºæ•°æ®æ€»æ•°ã€‚åˆ™F(x)*Nè¡¨ç¤ºkeyå€¼å°äºxçš„å…ƒç´ ä¸ªæ•°ï¼Œä¹Ÿå³å½“æ•°ç»„æœ‰åºæ—¶ï¼Œpos = <em>F(x) * N</em> å³ä¸ºkey=xçš„ä¸‹æ ‡ã€‚</p>
<p><img src="/2025/01/06/paper-reading/system/xstore/1736224874678-1.png" alt="img"></p>
<h1 id="2-XStore"><a href="#2-XStore" class="headerlink" title="2. XStore"></a>2. XStore</h1><p>OSDIâ€™20</p>
<p><strong>åœºæ™¯</strong>ï¼šè¿œç«¯å†…å­˜è®¿é—®ï¼Œserverç«¯å­˜å‚¨ordered kvstoreçš„æ•°æ®å’Œç´¢å¼•ï¼ˆrange indexï¼ŒB+æ ‘ï¼‰ï¼Œå¤šä¸ªclientç«¯è¯»å–kvstoreï¼Œé€šè¿‡RDMAæ¥åŠ é€Ÿ<strong>è¯»è·¯å¾„</strong>ã€‚</p>
<h2 id="2-1-Insight"><a href="#2-1-Insight" class="headerlink" title="2.1 Insight"></a>2.1 Insight</h2><h4 id="é—®é¢˜ï¼šç°æœ‰-ç´¢å¼•ç»“æ„-ä¸å¤Ÿé«˜æ•ˆ"><a href="#é—®é¢˜ï¼šç°æœ‰-ç´¢å¼•ç»“æ„-ä¸å¤Ÿé«˜æ•ˆ" class="headerlink" title="é—®é¢˜ï¼šç°æœ‰ ç´¢å¼•ç»“æ„ ä¸å¤Ÿé«˜æ•ˆ"></a><strong>é—®é¢˜</strong>ï¼šç°æœ‰ ç´¢å¼•ç»“æ„ <strong>ä¸å¤Ÿé«˜æ•ˆ</strong></h4><p>è¯»æ“ä½œä½¿ç”¨one-sided RDMAï¼Œæ¯ä¸ªRTTåªèƒ½è®¿é—®æ ‘å‹ç´¢å¼•çš„ä¸€å±‚ï¼Œéœ€è¦è¿›è¡Œè¿­ä»£å¼æŸ¥è¯¢ï¼Œæ¶ˆè€—å¤šä¸ªRTT</p>
<p><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-2.png" alt="img"></p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº†<strong>Index cache</strong>ï¼Œcacheç´¢å¼•æ ‘éƒ¨åˆ†èŠ‚ç‚¹ã€‚</p>
<p>å°½ç®¡å¼•å…¥index cacheï¼Œä¾ç„¶ä¸å¤Ÿé«˜æ•ˆï¼ŒåŸå› å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>Cache consumption</strong>ï¼šæ¶ˆè€—cacheå¤šï¼ˆ654MB for 100M KV pairsï¼‰</li>
<li><strong>Memory-intensive</strong>ï¼šéå†æ ‘å‹ç´¢å¼•æ˜¯å†…å­˜å¯†é›†å‹æ“ä½œï¼ŒåŒ…å«O(logN)éšæœºå†…å­˜è®¿é—®ï¼ˆCPUèŠ±åœ¨index cacheçš„æ—¶é—´å æ¯”30%ï¼‰</li>
<li><strong>Cache invalidation</strong>ï¼šå†™å¯†é›†åœºæ™¯ä¸‹ï¼Œ<ol>
<li>False invalidationï¼šä¸åŒæ•°æ®èŠ‚ç‚¹å…±äº«æŸ¥è¯¢è·¯å¾„ï¼ˆpath sharingï¼‰ï¼ŒB+æ ‘æ›´æ–°ç´¢å¼•æ˜¯é€’å½’çš„ï¼Œä¸€ä¸ªæ•°æ®èŠ‚ç‚¹æ²¡æœ‰è¢«ä¿®æ”¹ï¼ŒæŸ¥è¯¢è·¯å¾„cacheä¹Ÿå¯èƒ½æ˜¯å¤±æ•ˆçš„</li>
<li>Bandwidthï¼šæ›´æ–°cacheæ—¶è¯»å–çš„ç´¢å¼•èŠ‚ç‚¹å¤šï¼ŒæŒ¤å ç½‘ç»œå¸¦å®½</li>
</ol>
</li>
</ol>
<p>è¿™å‡ ä¸ªé—®é¢˜éšç€æ•°æ®é‡å¢å¤§ã€B+æ ‘å˜å¤§ï¼Œä¼šæ›´ä¸¥é‡</p>
<h4 id="è§‚ç‚¹ï¼šLearned-Index-æ›´é€‚åˆä½œä¸º-Index-Cache"><a href="#è§‚ç‚¹ï¼šLearned-Index-æ›´é€‚åˆä½œä¸º-Index-Cache" class="headerlink" title="è§‚ç‚¹ï¼šLearned Index æ›´é€‚åˆä½œä¸º Index Cache"></a>è§‚ç‚¹ï¼šLearned Index æ›´é€‚åˆä½œä¸º Index Cache</h4><p>è¯»æ“ä½œï¼škey-&gt;ML Model-&gt;[pos - min_err, pos + max_err]ï¼Œclienté€šè¿‡ä¸€æ¬¡RDMAè¯»å–èŒƒå›´å†…keyï¼Œæœ¬åœ°æŸ¥æ‰¾å¾—åˆ°ç²¾ç¡®åœ°å€ã€‚</p>
<ol>
<li><strong>Cache consumption</strong>ï¼šcacheæ¨¡å‹å³å¯ï¼Œç‰ºç‰²ç²¾åº¦ï¼Œæ¢å–ç›¸æ¯”B+æ ‘çš„æ›´å°‘çš„å†…å­˜å ç”¨ï¼ˆ6.7MB VS 600MBï¼‰</li>
<li><strong>Less memory access</strong>ï¼šä¸€æ¬¡è®¡ç®—+O(1)è®¿å­˜å°±å¯ä»¥å¾—åˆ°ç›®æ ‡keyå€¼ï¼Œæ— éœ€å¤šæ¬¡éšæœºè®¿å­˜/ç½‘ç»œroundtrip</li>
<li><strong>Cache invalidation</strong>ï¼šåªéœ€æä¾›è¿‘ä¼¼çš„ä¼°è®¡ï¼Œå‡å°‘/æ¨è¿Ÿcache invalidationï¼›æ¨¡å‹å°ï¼Œæ›´æ–°æ¶ˆè€—å¸¦å®½å°‘</li>
</ol>
<h4 id="æŒ‘æˆ˜ï¼šå¦‚ä½•é€‚åº”-dynamic-workloadï¼Ÿ"><a href="#æŒ‘æˆ˜ï¼šå¦‚ä½•é€‚åº”-dynamic-workloadï¼Ÿ" class="headerlink" title="æŒ‘æˆ˜ï¼šå¦‚ä½•é€‚åº” dynamic workloadï¼Ÿ"></a>æŒ‘æˆ˜ï¼šå¦‚ä½•é€‚åº” dynamic workloadï¼Ÿ</h4><p>ï¼ˆè¿›ä¸€æ­¥å‡å°‘invalidationå¼€é”€ï¼‰</p>
<p><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-3.png" alt="img"></p>
<ol>
<li>Learned index å‡è®¾æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªæœ‰åºæ•°ç»„ï¼›range index + CDFï¼›æ’å…¥æ—¶æ’åºå¼€é”€</li>
<li>Learned index è¯¯å·®ä¸Šä¸‹ç•Œï¼ˆmin_err, max_errï¼‰æ˜¯é™æ€ç¡®å®šçš„ï¼Œä¿®æ”¹ä¹‹åcache invalidationï¼Œéœ€è¦retrainã€‚</li>
</ol>
<p>ç›®æ ‡ï¼šå‡å°‘è¿™ä¸¤è€…çš„å¼€é”€</p>
<h2 id="2-2-Solution"><a href="#2-2-Solution" class="headerlink" title="2.2 Solution"></a>2.2 Solution</h2><h3 id="2-2-1-ä¿è¯æœ‰åº"><a href="#2-2-1-ä¿è¯æœ‰åº" class="headerlink" title="2.2.1 ä¿è¯æœ‰åº"></a>2.2.1 ä¿è¯æœ‰åº</h3><p>B+æ ‘å¶èŠ‚ç‚¹<strong>é€»è¾‘è¿ç»­</strong>ï¼Œå¯ä»¥è§†ä¸ºä¸€ä¸ªé€»è¾‘ä¸Šæœ‰åºçš„æ•°ç»„ â†’ B+æ ‘å¶èŠ‚ç‚¹ä½œä¸ºdatasetè®­ç»ƒæ¨¡å‹</p>
<h4 id="Hybridï¼šB-æ ‘ç´¢å¼•ï¼ˆserverï¼‰ï¼ŒML-Modelï¼ˆclientï¼‰ä½œä¸º-index-cacheã€‚"><a href="#Hybridï¼šB-æ ‘ç´¢å¼•ï¼ˆserverï¼‰ï¼ŒML-Modelï¼ˆclientï¼‰ä½œä¸º-index-cacheã€‚" class="headerlink" title="Hybridï¼šB+æ ‘ç´¢å¼•ï¼ˆserverï¼‰ï¼ŒML Modelï¼ˆclientï¼‰ä½œä¸º index cacheã€‚"></a><strong>Hybridï¼šB+æ ‘ç´¢å¼•ï¼ˆserverï¼‰ï¼ŒML Modelï¼ˆclientï¼‰ä½œä¸º index cacheã€‚</strong></h4><p><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-4.png" alt="img"></p>
<p>Index Cache åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p>
<ol>
<li>XModelï¼šç”±serverç«¯è®­ç»ƒï¼ŒclientæŒ‰éœ€cache</li>
<li>ä¸­é—´å±‚TTï¼šå¶èŠ‚ç‚¹åœ°å€ä¸è¿ç»­ï¼Œä¸ºäº†ä¿æŒå¶èŠ‚ç‚¹ä¹‹é—´æœ‰åºï¼Œéœ€è¦åœ¨serverç«¯ç»´æŠ¤translation tableè½¬æ¢é€»è¾‘åœ°å€å’Œå¶èŠ‚ç‚¹åœ°å€ã€‚ç”±serverç«¯ç»´æŠ¤ï¼ŒclientæŒ‰éœ€cache</li>
</ol>
<p>Update å¤ç”¨B+æ ‘ç»“æ„ï¼Œå‡å°‘æ—¶é—´å¤æ‚åº¦å’Œå¹¶å‘æ§åˆ¶å¤æ‚åº¦</p>
<h3 id="2-2-2-å‡å°‘-retrain-å¼€é”€"><a href="#2-2-2-å‡å°‘-retrain-å¼€é”€" class="headerlink" title="2.2.2 å‡å°‘ retrain å¼€é”€"></a>2.2.2 å‡å°‘ retrain å¼€é”€</h3><h4 id="åˆ†æ®µretrain"><a href="#åˆ†æ®µretrain" class="headerlink" title="åˆ†æ®µretrain"></a><strong>åˆ†æ®µretrain</strong></h4><ol>
<li> ä¸¤å±‚æ¨¡å‹ï¼Œtopä¸ºä¸€ä¸ª NNï¼Œç¬¬äºŒå±‚ä¸ºè‹¥å¹²ä¸ª linear regression (LR)ã€‚</li>
<li>ç®€å•æ¨¡å‹ï¼Œå¼€é”€å°ï¼›</li>
<li><strong>Partial retrain:</strong> å½“æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œå¯ä»¥åªæ›´æ–°sub module</li>
</ol>
<p><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-5.png" alt="img"></p>
<h4 id="é™ä½retrainé¢‘ç‡"><a href="#é™ä½retrainé¢‘ç‡" class="headerlink" title="é™ä½retrainé¢‘ç‡"></a><strong>é™ä½retrainé¢‘ç‡</strong></h4><ol>
<li><p> åªåœ¨å¶èŠ‚ç‚¹åˆ†è£‚çš„æ—¶å€™ï¼Œæ‰å¯¹ sub model å’Œ TT è¿›è¡Œå¼‚æ­¥æ›´æ–°</p>
</li>
<li><p> <strong>Q:</strong> èŠ‚ç‚¹æ²¡æœ‰åˆ†è£‚çš„æ—¶å€™ï¼ˆnormal insertï¼‰ï¼Œä¸ºä»€ä¹ˆå¯ä»¥ç”¨é™ˆæ—§çš„ cache (model+TT) è·å–æ­£ç¡®çš„ç»“æœï¼Ÿ</p>
</li>
<li><p> <strong>A:</strong></p>
</li>
<li><p>æ­£ç¡®æ€§å®šä¹‰ï¼šèƒ½æŸ¥åˆ°æ‰€æœ‰å·²æœ‰æ•°å€¼ã€‚æ–°æ’å…¥æ•°æ®<strong>ä¸ä¼šè¯¯åˆ¤</strong>ä¸ºä¸å­˜åœ¨ã€‚</p>
</li>
<li><p>è¯»å–ç²’åº¦ä¸ºå¶èŠ‚ç‚¹ï¼Œå¼•å…¥ä¸¤å±‚æ˜ å°„å…³ç³»ï¼š</p>
<p><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-6.png" alt="img"></p>
<ol>
<li><p>keyå€¼æœ€ç»ˆæ˜ å°„åˆ°ä¸€ä¸ªå¶èŠ‚ç‚¹ï¼›æ¯æ¬¡RDMAè¯»å–ç²’åº¦ä¸ºä¸€ä¸ªå¶èŠ‚ç‚¹ã€‚</p>
</li>
<li><p>åªæœ‰åœ¨èŠ‚ç‚¹åˆ†è£‚çš„æ—¶å€™æ‰ä¼šæ”¹å˜TTçš„æ˜ å°„å…³ç³»ï¼ˆå‘ç”Ÿdata movementï¼‰ï¼Œæ­¤æ—¶æ‰éœ€è¦é‡æ–°è®­ç»ƒï¼›å¦åˆ™ï¼Œè¯»å–ä¸€æ•´ä¸ªå¶èŠ‚ç‚¹ï¼Œç„¶åè¿›è¡Œlocal searchï¼Œæ€»èƒ½æ‰¾åˆ°æ‰€æœ‰å­˜åœ¨çš„å€¼</p>
</li>
<li><p>æœ¬è´¨ä¸Šç›¸å½“äºå¼•å…¥äº†ä¸€å±‚çº¦æŸï¼Œä¿è¯æ•°æ®ç§»åŠ¨å¸¦æ¥çš„è¯¯å·®ä¸è¶…è¿‡ä¸€ä¸ªå¶èŠ‚ç‚¹ã€‚</p>
<p><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-7.png" alt="img"></p>
</li>
</ol>
</li>
</ol>
<h3 id="2-2-3-Discussion"><a href="#2-2-3-Discussion" class="headerlink" title="2.2.3 Discussion"></a>2.2.3 Discussion</h3><p>å…³äºæ¨¡å‹çš„é€‰æ‹©ï¼Œåœ¨ä¸¤ç‚¹ä¸Šå­˜åœ¨trade-offï¼šâ‘  memory consumptionï¼›â‘¡ retraining cost</p>
<p>ç®€å•çš„æ¨¡å‹æ›´æ–°å¼€é”€å°ï¼Œä½†éœ€è¦å †æ•°é‡ä»¥æ›´ç»†ç²’åº¦æ›´ç²¾å‡†ï¼Œæ¶ˆè€—æ›´å¤šå†…å­˜ï¼›</p>
<p>å¤æ‚çš„æ¨¡å‹æ›´æ–°å¼€é”€å¤§ï¼Œä½†æ¶ˆè€—æ›´å°‘çš„å†…å­˜ã€‚</p>
<h3 id="2-2-4-Details-SKIP"><a href="#2-2-4-Details-SKIP" class="headerlink" title="2.2.4 Details (SKIP)"></a>2.2.4 Details (SKIP)</h3><ol>
<li><p><strong>å¹¶å‘æ§åˆ¶</strong></p>
<ol>
<li>Correctness condition: no lost keysï¼Œè¯»çš„æ—¶å€™åŸå­åœ°è¿”å›æ–°å€¼æˆ–è€…æ—§å€¼å°±å¯ä»¥</li>
<li>å¤šè¯»è€…ï¼ˆclientï¼‰å•å†™è€…ï¼ˆå•æœºserverï¼‰ï¼Œç®€åŒ–å¹¶å‘æ§åˆ¶</li>
<li>äº‹åŠ¡å†…å­˜HTMï¼Œå¯ä»¥æ£€æµ‹åˆ°å¹¶å‘RDMAæ“ä½œ</li>
<li>ä½¿ç”¨ cacheline versioning ä¿è¯RDMAè·¨cachelineè¯»çš„åŸå­æ€§</li>
</ol>
</li>
<li><p><strong>å¦‚ä½•å¤„ç†æ•°æ®å¢å¤šæ—¶ï¼Œè¯¯å·®ä¸å¯é¿å…åœ°å¢å¤§ï¼Ÿ</strong></p>
<ol>
<li> åŠ¨æ€å¢åŠ sub moduleçš„æ•°é‡ï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦retrainæ•´ä¸ªä¸¤å±‚æ¨¡å‹å’ŒTTã€‚ä½†ä¸ä¼šå½±å“æ€§èƒ½ï¼Œå¯ä»¥è¾¹è¿è¡Œè¾¹retrainï¼ŒåŸå› å¦‚ä¸‹ï¼š</li>
<li>TTç›¸å½“äºå¼•å…¥äº†ä¸€å±‚å¿«ç…§ï¼Œè®­ç»ƒè¿‡ç¨‹åªéœ€ä¿®æ”¹TTå³å¯ï¼Œä¸ä¼šç§»åŠ¨æ•°æ®ï¼Œæ‰€ä»¥è¿˜å¯ä»¥ç»§ç»­ç”¨stale stateæˆ–è€…fallbackåˆ°B+æ ‘å¤„ç†è¯·æ±‚</li>
<li>é€šè¿‡è°ƒåº¦ï¼Œå¯ä»¥æ¨è¿Ÿå†²çªçš„sub moduleçš„retrain</li>
<li>top moduleï¼ˆè®­ç»ƒå¼€é”€ç›¸å¯¹è¾ƒå¤§ï¼‰å¯ä»¥åœ¨æ•°æ®ä¸å®Œæ•´æƒ…å†µä¸‹retrain</li>
<li> å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒXStoreä¹Ÿå¯ä»¥åœ¨åˆ é™¤å€¼è¾ƒå¤šçš„æƒ…å†µä¸‹å¯¹modelè¿›è¡Œshrink resize</li>
</ol>
</li>
<li><p><strong>Optimization: å‡å°‘èŠ‚ç‚¹åˆ†è£‚æ—¶å€™çš„fallback</strong></p>
<p>Speculative executionï¼šå…¶å®æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„æ€è·¯ã€‚observationæ˜¯ï¼Œä¸€èˆ¬åˆ†è£‚åªä¼šç§»åŠ¨ä¸€éƒ¨åˆ†æ•°æ®åˆ°æ–°çš„siblingèŠ‚ç‚¹ï¼Œæ‰€ä»¥åªéœ€è¦åœ¨è¯¥èŠ‚ç‚¹æ‰¾ä¸åˆ°keyå€¼ä¸”èƒ½ç¡®ä¿ä¸æ˜¯non-existçš„æ—¶å€™ï¼Œé¡ºç€siblingæŒ‡é’ˆæŸ¥å…„å¼ŸèŠ‚ç‚¹å°±è¡Œã€‚</p>
</li>
<li><p><strong>Range</strong> <strong>query</strong> <strong>+</strong> <strong>corner case</strong></p>
<p>å‚è§5.2.2çš„range queryè¿‡ç¨‹ï¼Œä»¥åŠ5.2.3å¯¹corner caseçš„æè¿°</p>
</li>
<li><p><strong>å¦‚ä½•æŒä¹…åŒ–ï¼Ÿ</strong></p>
<p>Xcache åªç”¨ä½œè¯»è·¯å¾„ä¼˜åŒ–ï¼Œå¯¹loggingæ²¡æœ‰å½±å“ï¼Œå¹¶ä¸”å¯ä»¥rebuildã€‚</p>
</li>
<li><p><strong>å¦‚ä½•scale outï¼Ÿ</strong></p>
<p>æ ¹æ®key rangeè¿›è¡Œsharding</p>
</li>
<li><p><strong>å¶èŠ‚ç‚¹é”®å€¼åˆ†ç¦»å­˜å‚¨</strong></p>
<p>å½“é¢„æµ‹èŒƒå›´è·¨å¤šä¸ªå¶èŠ‚ç‚¹çš„æ—¶å€™ï¼Œéœ€è¦è¯»å–æ‰€æœ‰å¶èŠ‚ç‚¹çš„é”®å€¼å¯¹ï¼Œä¼šé€ æˆä¸€å®šç½‘ç»œå¸¦å®½æ”¾å¤§ï¼Œç‰¹åˆ«æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹valueå¾ˆå¤§å¾ˆå¤§ã€‚è€Œäº‹å®ä¸Šåªéœ€è¦è¯»å–keyè¿›è¡ŒéªŒè¯å°±å¤Ÿäº†ï¼Œæ‰€ä»¥XStoreçš„åšæ³•æ˜¯å…ˆè¯»metadata+key arrayï¼Œå†ç®—å‡ºvalueçš„offsetå»è¯»ï¼Œä¸€å…±ä¸¤æ¬¡RTTã€‚</p>
</li>
</ol>
<h2 id="2-3-Evaluation"><a href="#2-3-Evaluation" class="headerlink" title="2.3 Evaluation"></a>2.3 Evaluation</h2><p><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-8.png" alt="img"><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-9.png" alt="img"></p>
<h3 id="2-3-1-Overall"><a href="#2-3-1-Overall" class="headerlink" title="2.3.1 Overall"></a>2.3.1 Overall</h3><ol>
<li>RDONLYï¼šoutperforms SOTA by up to <strong>5.9Ã—</strong> (from 3.7Ã—)</li>
<li>RWï¼šup to <strong>3.5Ã—</strong> (from 2.7Ã—) throughput speedup</li>
</ol>
<h3 id="2-3-2-Retrainå¼€é”€"><a href="#2-3-2-Retrainå¼€é”€" class="headerlink" title="2.3.2 Retrainå¼€é”€"></a>2.3.2 Retrainå¼€é”€</h3><ol>
<li>2ä¸ªçº¿ç¨‹è¶³å¤Ÿ</li>
<li>peak insertion speed: â†“ 13%</li>
</ol>
<p><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-10.png" alt="img"></p>
<h3 id="2-3-3-Data-patterns"><a href="#2-3-3-Data-patterns" class="headerlink" title="2.3.3 Data patterns"></a>2.3.3 Data patterns</h3><h4 id="Key-distribution"><a href="#Key-distribution" class="headerlink" title="Key distribution"></a><strong>Key distribution</strong></h4><p>â‘  å‡åŒ€åˆ†å¸ƒï¼›â‘¡ æœ‰å™ªå£°ï¼›â‘¢ çœŸå®æ•°æ®é›†</p>
<p>éœ€è¦æ›´ç»†ç²’åº¦çš„sub moduleæ‹Ÿåˆæ›´å¤æ‚çš„åˆ†å¸ƒæƒ…å†µ</p>
<p><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-11.png" alt="img"></p>
<h4 id="Access-pattern"><a href="#Access-pattern" class="headerlink" title="Access pattern"></a><strong>Access pattern</strong></h4><p>â‘  å‡åŒ€è®¿é—®ï¼›â‘¡ è®¿é—®æœ€æ–°</p>
<p>â‘¡å¸¦æ¥ç›¸å¯¹é¢‘ç¹çš„model retrain</p>
<p><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-12.png" alt="img"></p>
<h3 id="2-3-4-Sensitive-analysis"><a href="#2-3-4-Sensitive-analysis" class="headerlink" title="2.3.4 Sensitive analysis"></a>2.3.4 Sensitive analysis</h3><h4 id="Breakdown"><a href="#Breakdown" class="headerlink" title="Breakdown"></a><strong>Breakdown</strong></h4><p>ç›¸æ¯”äºå…¨cacheæƒ…å†µå ä¼˜</p>
<p><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-13.png" alt="img"></p>
<h4 id="Memory-usage"><a href="#Memory-usage" class="headerlink" title="Memory usage"></a><strong>Memory usage</strong></h4><ol>
<li><p>100Mä¸ªKVçš„æƒ…å†µï¼š</p>
</li>
<li><p>Whole-tree index: <strong>~600****MB</strong></p>
</li>
<li><p>Model size: 500K sub-models, <strong>6.7****MB</strong></p>
<ol>
<li>  Sub-Model: 14B; two 32-bit floatingpoint model parameters, two 8-bit min- and max-error, and a 32-bit TT size.</li>
</ol>
</li>
<li><p>TT size: <strong>100****MB</strong>ï¼ŒclientæŒ‰éœ€cache</p>
<ol>
<li>  15% of the whole-tree indexã€‚TTæœ¬è´¨ä¸Šç›¸å½“äºB+æ ‘çš„æœ€åä¸€å±‚ç´¢å¼•ï¼Œå¹¶ä¸”TT entryæ¯”B+æ ‘ç´¢å¼•èŠ‚ç‚¹å°ï¼Œæ‰€ä»¥å†…å­˜å¼€é”€æ›´å°ã€‚</li>
</ol>
<p><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-14.png" alt="img"></p>
</li>
</ol>
<h4 id="Prediction-error"><a href="#Prediction-error" class="headerlink" title="Prediction error"></a><strong>Prediction error</strong></h4><ol>
<li> RDONLY: The prediction error of XCACHE is just 0.74.</li>
<li> RD latest: The prediction error would stably increase to 8.3 for YCSB D</li>
<li> <strong>ä¸€æ¬¡è¯»å–1~2ä¸ª****å¶èŠ‚ç‚¹</strong></li>
</ol>
<h4 id="Inline-indirect-KVs"><a href="#Inline-indirect-KVs" class="headerlink" title="Inline/indirect KVs"></a><strong>Inline/indirect KVs</strong></h4><p>indirectéœ€è¦additional one RMDA</p>
<p><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-15.png" alt="img"></p>
<h1 id="3-Related-work"><a href="#3-Related-work" class="headerlink" title="3. Related work"></a>3. Related work</h1><h3 id="FASTâ€™23-ROLEX"><a href="#FASTâ€™23-ROLEX" class="headerlink" title="FASTâ€™23  ROLEX"></a>FASTâ€™23  ROLEX</h3><p>é’ˆå¯¹DMåœºæ™¯ï¼Œæ‹“å±•XStoreçš„å®ç°ã€‚</p>
<p>ä»–çš„ç»“æ„å’Œæ ¸å¿ƒè§‚å¯Ÿï¼ˆæ§åˆ¶è¯»å†™ç²’åº¦ï¼‰éƒ½è·Ÿxstoreå·®ä¸å¤šï¼Œåªæ˜¯å»æ‰äº†B+æ ‘ï¼Œç•™ä¸‹äº†å¶èŠ‚ç‚¹ï¼Œé€šè¿‡delta indexæ¥ç¼“è§£å†™æ“ä½œå¸¦æ¥çš„å‹åŠ›ã€‚</p>
<p><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-16.png" alt="img"><img src="/2025/01/06/paper-reading/system/xstore/1736224874679-17.png" alt="img"></p>
<p>ç¼ºé™·ï¼šæ¯æ¬¡è¯»æ•°æ®éœ€è¦è¯»å–æ›´å¤šå¶èŠ‚ç‚¹</p>
<h3 id="SOSPâ€™24-CHIME"><a href="#SOSPâ€™24-CHIME" class="headerlink" title="SOSPâ€™24  CHIME"></a>SOSPâ€™24  CHIME</h3><p>hybrid indexï¼Œç”¨å“ˆå¸Œè¡¨å–ä»£B+æ ‘å¶å­èŠ‚ç‚¹ï¼Œå°†é¢„æµ‹èŒƒå›´ç¼©å°åœ¨configurableçš„é‚»åŸŸå†…ï¼Œå‡å°‘<strong>å¶èŠ‚ç‚¹</strong>æ•°æ®å¯¹ç½‘ç»œå¸¦å®½çš„æ”¾å¤§ã€‚</p>
<p>My note: <a href="./CHIME">CHIME</a></p>
<h1 id="4-Comments"><a href="#4-Comments" class="headerlink" title="4. Comments"></a>4. Comments</h1><h4 id="æ–°æŠ€æœ¯åœ¨ç›¸å¯¹ä¼ ç»Ÿåœºæ™¯çš„åº”ç”¨ï¼Œthe-first"><a href="#æ–°æŠ€æœ¯åœ¨ç›¸å¯¹ä¼ ç»Ÿåœºæ™¯çš„åº”ç”¨ï¼Œthe-first" class="headerlink" title="æ–°æŠ€æœ¯åœ¨ç›¸å¯¹ä¼ ç»Ÿåœºæ™¯çš„åº”ç”¨ï¼Œthe first"></a><strong>æ–°æŠ€æœ¯åœ¨ç›¸å¯¹ä¼ ç»Ÿåœºæ™¯çš„åº”ç”¨ï¼Œthe first</strong></h4><p>â‘  æ–°æŠ€æœ¯ï¼šlearned indexï¼›â‘¡ ä¼ ç»Ÿåœºæ™¯ï¼šå•æœºserverï¼ŒRDMAåŠ é€Ÿè¯»æ“ä½œ</p>
<p><strong>åˆ†æå¾ˆå…¨é¢</strong></p>
<ol>
<li>ä¸ºä»€ä¹ˆä¼ ç»Ÿæ–¹æ³•ä¸é€‚é…ï¼›ä¸ºä»€ä¹ˆæ–°æŠ€æœ¯æ›´é€‚é…</li>
<li>æ–°æŠ€æœ¯é¢ä¸´çš„æŒ‘æˆ˜ä¸trade-offï¼ˆmemory consumptionï¼Œretrain costï¼‰</li>
</ol>
<p>æ›´å¤š<strong>é’ˆå¯¹æŠ½è±¡åˆ†æ</strong>ï¼ˆfar memoryï¼‰è€Œéå…·ä½“çš„åœºæ™¯ï¼Œæ‰€ä»¥åœ¨ç°åœ¨æ›´æµè¡Œçš„DM (Disaggregated memory) ä¸Šåˆ†æä¾ç„¶ä¸è¿‡æ—¶ã€‚</p>
<h4 id="è§£å†³æ–¹æ³•ç²¾ç‚¼ã€solid"><a href="#è§£å†³æ–¹æ³•ç²¾ç‚¼ã€solid" class="headerlink" title="è§£å†³æ–¹æ³•ç²¾ç‚¼ã€solid"></a><strong>è§£å†³æ–¹æ³•ç²¾ç‚¼ã€solid</strong></h4><p><strong>ç»å…¸systemæ€æƒ³ï¼š</strong>åˆ†æ®µã€è¯»å†™åˆ†ç¦»hybridæ¶æ„ã€indirect layer to decoupleï¼ˆTTï¼‰ï¼›è€ƒè™‘å‘¨å…¨ï¼Œå®éªŒå®Œå–„</p>
<p><strong>è®¾è®¡ä¸åœºæ™¯é€‚é…</strong>ï¼šé’ˆå¯¹ä¼ ç»Ÿåœºæ™¯å¯¹å®ç°è¿›è¡Œäº†ä¸€äº›å‰ªæï¼Œçªå‡ºé‡ç‚¹</p>
<ol>
<li>Dynamic workloadçš„æ”¯æŒ<ol>
<li> xstore é€šè¿‡B+æ ‘å®ç° in-place updateï¼Œä»è€Œå‡å°‘æ’åºå¼€é”€ï¼›</li>
<li> è¯»å†™ç²’åº¦ä¸ºä¸€ä¸ªå¶èŠ‚ç‚¹ï¼Œå‡å°‘ retrain å¼€é”€ã€‚ï¼ˆç©ºé—´æ¢æ—¶é—´ï¼‰</li>
<li> scenario-specified</li>
</ol>
</li>
<li>æ¨¡å‹ç®€å•æ€§<ol>
<li>è€ƒè™‘æ•°æ®å†·çƒ­ï¼Œæé«˜å¯¹çƒ­é”®çš„é¢„æµ‹ç²¾å‡†åº¦ï¼›ä¸åŒkeyå€¼åˆ†å¸ƒ</li>
<li>æœ‰è®¨è®ºåˆ†æ</li>
</ol>
</li>
<li>serverç«¯çš„CPU bottleneck<ol>
<li>serverç«¯éœ€è¦å¤„ç†å†™è¯·æ±‚ï¼Œè¿˜éœ€è¦é‡æ–°è®­ç»ƒæ¨¡å‹</li>
<li>é¢å‘å•æœºserverï¼ŒCPUèµ„æºç›¸å¯¹ï¼ˆDMï¼‰å……è¶³ï¼›scale outå¯ä»¥ç¼“è§£</li>
</ol>
</li>
</ol>

        </div>

        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/research/"># research</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>Â· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
            
            <a class="next" rel="next" href="/2024/12/26/paper-reading/system/CHIME/">CHIME: A Cache-Efficient and High-Performance Hybrid Index on Disaggregated Memor</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>Â© ä¿®å¹´ | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>